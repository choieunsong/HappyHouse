{"remainingRequest":"/Users/eunsong/git/happyhouse-qna/node_modules/babel-loader/lib/index.js!/Users/eunsong/git/happyhouse-qna/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/eunsong/git/happyhouse-qna/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eunsong/git/happyhouse-qna/src/components/Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eunsong/git/happyhouse-qna/src/components/Comment.vue","mtime":1621772631807},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBidXMgfSBmcm9tICdAL2JvYXJkYnVzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb21tZW50JywKICBwcm9wczogWydyZXBseScsICdibm8nXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBkYXRlZDogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0VXNlcm5hbWU6IGZ1bmN0aW9uIGdldFVzZXJuYW1lKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlcm5hbWU7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVDb21tZW50OiBmdW5jdGlvbiB1cGRhdGVDb21tZW50KGJubykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coYm5vKTsKICAgICAgYXhpb3MucHV0KCJodHRwOi8vbG9jYWxob3N0OjkwOTAvaGFwcHlob3VzZS9xbmEvYm9hcmQvcmVwbHkiLCB7CiAgICAgICAgYm5vOiBibm8sCiAgICAgICAgbm86IHRoaXMucmVwbHkubm8sCiAgICAgICAgd3JpdGU6IHRoaXMucmVwbHkud3JpdGUsCiAgICAgICAgY29udGVudDogdGhpcy5yZXBseS5jb250ZW50CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYpIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYuZGF0YTsKCiAgICAgICAgaWYgKGRhdGEgPT0gInN1Y2Nlc3MiKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgIF90aGlzLnVwZGF0ZWQgPSBmYWxzZTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBidXMuJGVtaXQoJ3NlYXJjaEJvYXJkJywgYm5vKTsKICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KCLsmKTrpZjrsJzsg50iKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBhbGVydCgi7Jik66WYIOuwnOyDnSIpOwogICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVDb21tZW50OiBmdW5jdGlvbiB0b2dnbGVDb21tZW50KCkgewogICAgICBpZiAodGhpcy51cGRhdGVkKSB7CiAgICAgICAgdGhpcy51cGRhdGVkID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cGRhdGVkID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUNvbW1lbnQ6IGZ1bmN0aW9uIGRlbGV0ZUNvbW1lbnQoYm5vKSB7CiAgICAgIGNvbnNvbGUubG9nKGJubyk7CiAgICAgIGF4aW9zLmRlbGV0ZSgiaHR0cDovL2xvY2FsaG9zdDo5MDkwL2hhcHB5aG91c2UvcW5hL2JvYXJkL3JlcGx5LyIuY29uY2F0KHRoaXMucmVwbHkubm8pKS50aGVuKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTsKCiAgICAgICAgaWYgKGRhdGEgPT0gInN1Y2Nlc3MiKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGJubyk7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYnVzLiRlbWl0KCdzZWFyY2hCb2FyZCcsIGJubyk7CiAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgi7Jik66WYIOuwnOyDnSIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIGFsZXJ0KCLsmKTrpZgg67Cc7IOdIik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZmlsdGVyczogewogICAgdG9EYXRlOiBmdW5jdGlvbiB0b0RhdGUocmVndGltZSkgewogICAgICByZXR1cm4gbW9tZW50KG5ldyBEYXRlKHJlZ3RpbWUpKS5mb3JtYXQoIllZWVkuTU0uREQuSEg6bW0iKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,OAAA,MAAA,MAAA,QAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,GAAA,QAAA,YAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,KAAA,EAAA,CAAA,OAAA,EAAA,KAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AADA,KAAA;AAGA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA;AAHA,GARA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,yBACA,GADA,EACA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,KAAA,CACA,GADA,qDACA;AACA,QAAA,GAAA,EAAA,GADA;AAEA,QAAA,EAAA,EAAA,KAAA,KAAA,CAAA,EAFA;AAGA,QAAA,KAAA,EAAA,KAAA,KAAA,CAAA,KAHA;AAIA,QAAA,OAAA,EAAA,KAAA,KAAA,CAAA;AAJA,OADA,EAOA,IAPA,CAOA,gBAAA;AAAA,YAAA,IAAA,QAAA,IAAA;;AACA,YAAA,IAAA,IAAA,SAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AAEA,UAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AAEA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,GAAA,CAAA,KAAA,CAAA,aAAA,EAAA,GAAA;AACA,WAFA,EAEA,GAFA,CAAA;AAGA,SARA,MAQA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA;AACA;AACA,OAnBA,EAoBA,KApBA,CAoBA,YAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA;AACA,OAtBA;AAuBA,KA1BA;AA2BA,IAAA,aA3BA,2BA2BA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,OAFA,MAEA;AACA,aAAA,OAAA,GAAA,IAAA;AACA;AACA,KAjCA;AAkCA,IAAA,aAlCA,yBAkCA,GAlCA,EAkCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,KAAA,CACA,MADA,4DACA,KAAA,KAAA,CAAA,EADA,GAEA,IAFA,CAEA,iBAAA;AAAA,YAAA,IAAA,SAAA,IAAA;;AACA,YAAA,IAAA,IAAA,SAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AAEA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,GAAA,CAAA,KAAA,CAAA,aAAA,EAAA,GAAA;AACA,WAFA,EAEA,GAFA,CAAA;AAGA,SAPA,MAOA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA;AACA;AAEA,OAdA,EAeA,KAfA,CAeA,YAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA;AACA,OAjBA;AAkBA;AAtDA,GAbA;AAqEA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,EAAA,gBAAA,OAAA,EAAA;AACA,aAAA,MAAA,CAAA,IAAA,IAAA,CAAA,OAAA,CAAA,CAAA,CAAA,MAAA,CAAA,kBAAA,CAAA;AACA;AAHA;AArEA,CAAA","sourcesContent":["<template>\n    <li class=\"list-group-item\">\n        <div v-if=\"!updated\">\n            <div style=\"margin-bottom: 10px;\">\n                <span class=\"reply-header\">{{reply.writer}}</span>\n                (<span class=\"reply-header\">{{reply.writetime | toDate}}</span>)\n            </div>\n            <div class=\"row\">\n                <div class=\"col-10\">\n                    <h5 class=\"card-text\">{{reply.content}}</h5>\n                </div>\n                <div class=\"text-right\" v-if=\"getUsername == reply.writer\">\n                    <div class=\"row\">\n                        <button class=\"btn btn-primary btn-reply\" @click=\"toggleComment()\">수정</button>\n                        <button class=\"btn btn-primary btn-reply\" @click=\"deleteComment(bno)\">삭제</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-else>\n            <div>\n            <div class=\"form-group row\">                \n                <label for=\"writer\" class=\"col-sm-2 col-form-label\">작성자 : </label>\n                <div class=\"col-sm-10\">\n                    <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"writer\" v-model=\"getUsername\">\n                </div>\n            </div>\n            <div class=\"form-group\">\n                <textarea class=\"form-control\" id=\"content\" v-model=\"reply.content\" ref=\"content\" style=\"min-width: 100%\"></textarea>\n            </div>\n            <div class=\"text-right\">\n                <div class=\"row\">\n                <button class =\"btn btn-primary btn-reply\" @click=\"updateComment(bno)\">등록</button>\n                <button class  =\"btn btn-primary btn-reply\" @click=\"toggleComment()\">취소</button>\n                </div>\n            </div>\n        </div>\n        </div>\n    </li>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport axios from 'axios';\nimport {bus} from '@/boardbus'\nexport default {\n    name: 'Comment',\n    props: ['reply', 'bno'],\n    data(){\n        return{\n            updated: false,\n        }\n    },\n    computed: {\n        getUsername(){\n            return this.$store.state.username;\n        }\n    },\n    methods:{\n        updateComment(bno){\n            console.log(bno);\n            axios\n            .put(`http://localhost:9090/happyhouse/qna/board/reply`,{\n                bno: bno,\n                no: this.reply.no,\n                write: this.reply.write,\n                content: this.reply.content\n            })\n            .then(({data}) => {\n                if(data == \"success\"){\n                    console.log(data);\n                    \n                    this.updated = false;\n                    \n                    setTimeout(()=>{ \n                        bus.$emit('searchBoard', bno)\n                    }, 100);\n                } else{\n                    alert(\"오류발생\");\n                }\n            })\n            .catch(() => {\n                alert(\"오류 발생\");\n            });\n        },\n        toggleComment(){\n            if(this.updated){\n                this.updated  = false;\n            }else{\n                this.updated = true;\n            }\n        },\n        deleteComment(bno){\n            console.log(bno);\n            axios\n            .delete(`http://localhost:9090/happyhouse/qna/board/reply/${this.reply.no}`)\n            .then(({data}) => {\n                if(data ==\"success\"){\n                    console.log(data);\n                    console.log(bno);\n                    \n                    setTimeout(()=>{\n                        bus.$emit('searchBoard', bno);\n                    }, 100);\n                } else {\n                    alert(\"오류 발생\");\n                }\n                \n            })\n            .catch(()=>{\n                alert(\"오류 발생\");\n            })\n        },\n    },\n    filters: {\n        toDate: function (regtime) {\n            return moment(new Date(regtime)).format(\"YYYY.MM.DD.HH:mm\");\n        }\n    },\n}\n</script>\n\n<style>\n.reply-header{\n    font-size: 15px;\n}\n\n.btn-reply{\n    margin: 10px;\n}\n</style>"],"sourceRoot":"src/components"}]}