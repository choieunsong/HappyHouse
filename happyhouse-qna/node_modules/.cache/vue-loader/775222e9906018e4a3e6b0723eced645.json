{"remainingRequest":"/Users/eunsong/git/happyhouse-qna/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eunsong/git/happyhouse-qna/src/components/Update.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/eunsong/git/happyhouse-qna/src/components/Update.vue","mtime":1621683779351},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/git/happyhouse-qna/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5idG4tZ3JvdXB7DQogIG1hcmdpbjogMTBweDsNCiAgcGFkZGluZzogNXB4IDMwcHg7DQp9DQo="},{"version":3,"sources":["Update.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA","file":"Update.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <h2 class=\"text-center\">게시글 수정</h2>\r\n    <table class=\"table table-condensed\">\r\n      <tr>\r\n        <th>제목</th>\r\n        <td>\r\n          <input type=\"text\" id=\"title\" ref=\"title\" placeholder=\"제목을 입력해주세요\" v-model=\"title\" />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <th>내용</th>\r\n        <td>\r\n          <textarea id=\"content\" cols=\"60\" rows=\"10\" ref=\"content\" v-model=\"content\"></textarea>\r\n        </td>\r\n      </tr>\r\n    </table> \r\n\r\n    <div class=\"text-right\">\r\n      <button class=\"btn btn-primary btn-group\" @click=\"updateHandler\">수정</button>\r\n      <button class=\"btn btn-primary btn-group\" @click=\"moveHandler\">목록</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport {bus} from '@/boardbus'\r\nexport default {\r\n  data() {\r\n    return {\r\n      no: \"\",\r\n      regtime: \"\",\r\n      writer: \"\",\r\n      title: \"\",\r\n      content: \"\"\r\n    };\r\n  },\r\n  filters: {\r\n    toDate: function (regtime) {\r\n      return moment(new Date(regtime)).format(\"YYYY.MM.DD\");\r\n    }\r\n  },\r\n  methods: {\r\n    updateHandler: function() {\r\n      let err = true;\r\n      let msg = \"\";\r\n      //필수 요건 검사\r\n      err &&\r\n        !this.title &&\r\n        ((msg = \"제목을 입력해 주세요\"), (err = false), this.$refs.title.focus());\r\n      err &&\r\n        !this.content &&\r\n        ((msg = \"내용을 입력해 주세요\"), (err = false), this.$refs.content.focus());\r\n\r\n      if (!err) alert(msg);\r\n      else {\r\n        axios\r\n          .put(`http://localhost:9090/happyhouse/qna/board/${this.no}`, {\r\n            no: this.no,\r\n            title: this.title,\r\n            writer: this.writer,\r\n            content: this.content\r\n          })\r\n          .then(({ data }) => {\r\n            if (data == \"success\") {\r\n              console.log(\"update................\", data);\r\n              alert(\"수정 완료!!!\");\r\n              this.moveHandler();\r\n            } else {\r\n              alert(\"수정 중 오류 발생\");\r\n            }\r\n          })\r\n          .catch(() => {\r\n            alert(\"오류 발생\");\r\n          });\r\n      } // else end\r\n    }, //function end\r\n    moveHandler: function() {\r\n      this.$router.push(\"/search\");\r\n      setTimeout(()=>{\r\n          bus.$emit('searchBoard', this.no);\r\n      }, 100);\r\n    },\r\n    setboard(data){\r\n      this.no = data.no;\r\n      this.title = data.title;\r\n      this.writer = data.writer;\r\n      this.regtime = data.regtime;\r\n      this.content = data.content;\r\n    }\r\n  },\r\n  created() {\r\n    bus.$on('updateBoard', this.setboard)\r\n  } \r\n}\r\n</script>   \r\n\r\n<style>\r\n.btn-group{\r\n  margin: 10px;\r\n  padding: 5px 30px;\r\n}\r\n</style>"]}]}