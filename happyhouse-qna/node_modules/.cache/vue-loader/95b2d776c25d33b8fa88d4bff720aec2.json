{"remainingRequest":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/src/components/Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/src/components/Comment.vue","mtime":1621686549148},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHtidXN9IGZyb20gJ0AvYm9hcmRidXMnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdDb21tZW50JywKICAgIHByb3BzOiBbJ3JlcGx5JywgJ2JubyddLAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgdXBkYXRlZDogZmFsc2UsCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgZ2V0VXNlcm5hbWUoKXsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJuYW1lOwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICB0b2dnbGVDb21tZW50KCl7CiAgICAgICAgICAgIGlmKHRoaXMudXBkYXRlZCl7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWQgID0gZmFsc2U7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZGVsZXRlQ29tbWVudChibm8pewogICAgICAgICAgICBjb25zb2xlLmxvZyhibm8pOwogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAuZGVsZXRlKGBodHRwOi8vbG9jYWxob3N0OjkwOTAvaGFwcHlob3VzZS9xbmEvYm9hcmQvcmVwbHkvJHt0aGlzLnJlcGx5Lm5vfWApCiAgICAgICAgICAgIC50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgICAgICAgIGlmKGRhdGEgPT0ic3VjY2VzcyIpewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJubyk7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goJy9zZWFyY2gnKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgnc2VhcmNoQm9hcmQnLCBibm8pCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuyYpOulmCDrsJzsg50iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKCk9PnsKICAgICAgICAgICAgICAgIGFsZXJ0KCLsmKTrpZgg67Cc7IOdIik7CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVDb21tZW50KGJubyl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJubyk7CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wdXQoYGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9oYXBweWhvdXNlL3FuYS9ib2FyZC9yZXBseWAsewogICAgICAgICAgICAgICAgYm5vOiBibm8sCiAgICAgICAgICAgICAgICBubzogdGhpcy5yZXBseS5ubywKICAgICAgICAgICAgICAgIHdyaXRlOiB0aGlzLnJlcGx5LndyaXRlLAogICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5yZXBseS5jb250ZW50CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKCh7ZGF0YX0pID0+IHsKICAgICAgICAgICAgICAgIGlmKGRhdGEgPT0gInN1Y2Nlc3MiKXsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3NlYXJjaCcpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsgCiAgICAgICAgICAgICAgICAgICAgICAgIGJ1cy4kZW1pdCgnc2VhcmNoQm9hcmQnLCBibm8pCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgICAgICAgICB9IGVsc2V7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIuyYpOulmOuwnOyDnSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgYWxlcnQoIuyYpOulmCDrsJzsg50iKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICB0b0RhdGU6IGZ1bmN0aW9uIChyZWd0aW1lKSB7CiAgICAgICAgICAgIHJldHVybiBtb21lbnQobmV3IERhdGUocmVndGltZSkpLmZvcm1hdCgiWVlZWS5NTS5ERC5ISDptbSIpOwogICAgICAgIH0KICAgIH0sCn07Cg=="},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Comment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <li class=\"list-group-item\">\n        <div v-if=\"!updated\">\n            <div style=\"margin-bottom: 10px;\">\n                <span class=\"reply-header\">{{reply.writer}}</span>\n                (<span class=\"reply-header\">{{reply.writetime | toDate}}</span>)\n            </div>\n            <div class=\"row\">\n                <div class=\"col-10\">\n                    <h5 class=\"card-text\">{{reply.content}}</h5>\n                </div>\n                <div class=\"text-right\" v-if=\"getUsername == reply.writer\">\n                    <div class=\"row\">\n                        <button class=\"btn btn-primary btn-reply\" @click=\"toggleComment()\">수정</button>\n                        <button class=\"btn btn-primary btn-reply\" @click=\"deleteComment(bno)\">삭제</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-else>\n            <form>\n            <div class=\"form-group row\">                \n                <label for=\"writer\" class=\"col-sm-2 col-form-label\">작성자 : </label>\n                <div class=\"col-sm-10\">\n                    <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"writer\" value=\"작성자(ssafy)\">\n                </div>\n            </div>\n            <div class=\"form-group \">\n                <textarea class=\"form-control\" id=\"content\" v-model=\"reply.content\" ref=\"content\" rows=\"3\" style=\"min-width: 100%\" @keypress.enter=\"updateComment(bno)\"></textarea>\n            </div>\n            <div class=\"text-right\">\n                <div class=\"row\">\n                <button class  =\"btn btn-primary  btn-reply\" @click=\"toggleComment()\">취소</button>\n                <button class  =\"btn btn-primary  btn-reply\" @click=\"updateComment(bno)\">등록</button>\n                </div>\n            </div>\n        </form>\n        </div>\n    </li>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport axios from 'axios';\nimport {bus} from '@/boardbus'\nexport default {\n    name: 'Comment',\n    props: ['reply', 'bno'],\n    data(){\n        return{\n            updated: false,\n        }\n    },\n    computed: {\n        getUsername(){\n            return this.$store.state.username;\n        }\n    },\n    methods:{\n        toggleComment(){\n            if(this.updated){\n                this.updated  = false;\n            }else{\n                this.updated = true;\n            }\n        },\n        deleteComment(bno){\n            console.log(bno);\n            axios\n            .delete(`http://localhost:9090/happyhouse/qna/board/reply/${this.reply.no}`)\n            .then(({data}) => {\n                if(data ==\"success\"){\n                    console.log(data);\n                    console.log(bno);\n                    // this.$router.push('/search');\n                    setTimeout(()=>{\n                        bus.$emit('searchBoard', bno)\n                    }, 100);\n                } else {\n                    alert(\"오류 발생\");\n                }\n                \n            })\n            .catch(()=>{\n                alert(\"오류 발생\");\n            })\n        },\n        updateComment(bno){\n            console.log(bno);\n            axios\n            .put(`http://localhost:9090/happyhouse/qna/board/reply`,{\n                bno: bno,\n                no: this.reply.no,\n                write: this.reply.write,\n                content: this.reply.content\n            })\n            .then(({data}) => {\n                if(data == \"success\"){\n                    console.log(data);\n                    \n                    this.$router.push('/search');\n                    setTimeout(()=>{ \n                        bus.$emit('searchBoard', bno)\n                        this.updated = false;\n                    }, 100);\n                } else{\n                    alert(\"오류발생\");\n                }\n            })\n            .catch(() => {\n                alert(\"오류 발생\");\n            });\n        }\n    },\n    filters: {\n        toDate: function (regtime) {\n            return moment(new Date(regtime)).format(\"YYYY.MM.DD.HH:mm\");\n        }\n    },\n};\n</script>\n\n<style>\n.reply-header{\n    font-size: 15px;\n}\n\n.btn-reply{\n    margin: 10px;\n}\n</style>"]}]}