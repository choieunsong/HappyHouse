{"remainingRequest":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/src/components/Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/src/components/Comment.vue","mtime":1621683779345},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/eunsong/Documents/SSAFY/WorkSpace/vuejs/Workshop/happyhouse-cli/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHtidXN9IGZyb20gJ0AvYm9hcmRidXMnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdDb21tZW50JywKICAgIHByb3BzOiBbJ3JlcGx5JywgJ2JubyddLAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgdXBkYXRlZDogZmFsc2UsCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIHRvZ2dsZUNvbW1lbnQoKXsKICAgICAgICAgICAgaWYodGhpcy51cGRhdGVkKXsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZCAgPSBmYWxzZTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBkZWxldGVDb21tZW50KGJubyl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGJubyk7CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5kZWxldGUoYGh0dHA6Ly9sb2NhbGhvc3Q6OTA5MC9oYXBweWhvdXNlL3FuYS9ib2FyZC9yZXBseS8ke3RoaXMucmVwbHkubm99YCkKICAgICAgICAgICAgLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgICAgICAgaWYoZGF0YSA9PSJzdWNjZXNzIil7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYm5vKTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCgnL3NlYXJjaCcpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCdzZWFyY2hCb2FyZCcsIGJubykKICAgICAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi7Jik66WYIOuwnOyDnSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKT0+ewogICAgICAgICAgICAgICAgYWxlcnQoIuyYpOulmCDrsJzsg50iKTsKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHVwZGF0ZUNvbW1lbnQoYm5vKXsKICAgICAgICAgICAgY29uc29sZS5sb2coYm5vKTsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgLnB1dChgaHR0cDovL2xvY2FsaG9zdDo5MDkwL2hhcHB5aG91c2UvcW5hL2JvYXJkL3JlcGx5YCx7CiAgICAgICAgICAgICAgICBibm86IGJubywKICAgICAgICAgICAgICAgIG5vOiB0aGlzLnJlcGx5Lm5vLAogICAgICAgICAgICAgICAgd3JpdGU6IHRoaXMucmVwbHkud3JpdGUsCiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLnJlcGx5LmNvbnRlbnQKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKHtkYXRhfSkgPT4gewogICAgICAgICAgICAgICAgaWYoZGF0YSA9PSAic3VjY2VzcyIpewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvc2VhcmNoJyk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+eyAKICAgICAgICAgICAgICAgICAgICAgICAgYnVzLiRlbWl0KCdzZWFyY2hCb2FyZCcsIGJubykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZXsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi7Jik66WY67Cc7IOdIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICBhbGVydCgi7Jik66WYIOuwnOyDnSIpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LAogICAgZmlsdGVyczogewogICAgICAgIHRvRGF0ZTogZnVuY3Rpb24gKHJlZ3RpbWUpIHsKICAgICAgICAgICAgcmV0dXJuIG1vbWVudChuZXcgRGF0ZShyZWd0aW1lKSkuZm9ybWF0KCJZWVlZLk1NLkRELkhIOm1tIik7CiAgICAgICAgfQogICAgfSwKfTsK"},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Comment.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <li class=\"list-group-item\">\n        <div v-if=\"!updated\">\n            <div style=\"margin-bottom: 10px;\">\n                <span class=\"reply-header\">{{reply.writer}}</span>\n                (<span class=\"reply-header\">{{reply.writetime | toDate}}</span>)\n            </div>\n            <div class=\"row\">\n                <div class=\"col-10\">\n                    <h5 class=\"card-text\">{{reply.content}}</h5>\n                </div>\n                <div class=\"text-right\">\n                    <div class=\"row\">\n                        <button class=\"btn btn-primary btn-reply\" @click=\"toggleComment()\">수정</button>\n                        <button class=\"btn btn-primary btn-reply\" @click=\"deleteComment(bno)\">삭제</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div v-else>\n            <form>\n            <div class=\"form-group row\">                \n                <label for=\"writer\" class=\"col-sm-2 col-form-label\">작성자 : </label>\n                <div class=\"col-sm-10\">\n                    <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"writer\" value=\"작성자(ssafy)\">\n                </div>\n            </div>\n            <div class=\"form-group \">\n                <textarea class=\"form-control\" id=\"content\" v-model=\"reply.content\" ref=\"content\" rows=\"3\" style=\"min-width: 100%\" @keypress.enter=\"updateComment(bno)\"></textarea>\n            </div>\n            <div class=\"text-right\">\n                <div class=\"row\">\n                <button class  =\"btn btn-primary  btn-reply\" @click=\"toggleComment()\">취소</button>\n                <button class  =\"btn btn-primary  btn-reply\" @click=\"updateComment(bno)\">등록</button>\n                </div>\n            </div>\n        </form>\n        </div>\n    </li>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport axios from 'axios';\nimport {bus} from '@/boardbus'\nexport default {\n    name: 'Comment',\n    props: ['reply', 'bno'],\n    data(){\n        return{\n            updated: false,\n        }\n    },\n    methods:{\n        toggleComment(){\n            if(this.updated){\n                this.updated  = false;\n            }else{\n                this.updated = true;\n            }\n        },\n        deleteComment(bno){\n            console.log(bno);\n            axios\n            .delete(`http://localhost:9090/happyhouse/qna/board/reply/${this.reply.no}`)\n            .then(({data}) => {\n                if(data ==\"success\"){\n                    console.log(data);\n                    console.log(bno);\n                    // this.$router.push('/search');\n                    setTimeout(()=>{\n                        bus.$emit('searchBoard', bno)\n                    }, 100);\n                } else {\n                    alert(\"오류 발생\");\n                }\n                \n            })\n            .catch(()=>{\n                alert(\"오류 발생\");\n            })\n        },\n        updateComment(bno){\n            console.log(bno);\n            axios\n            .put(`http://localhost:9090/happyhouse/qna/board/reply`,{\n                bno: bno,\n                no: this.reply.no,\n                write: this.reply.write,\n                content: this.reply.content\n            })\n            .then(({data}) => {\n                if(data == \"success\"){\n                    console.log(data);\n                    \n                    this.$router.push('/search');\n                    setTimeout(()=>{ \n                        bus.$emit('searchBoard', bno)\n                        this.updated = false;\n                    }, 100);\n                } else{\n                    alert(\"오류발생\");\n                }\n            })\n            .catch(() => {\n                alert(\"오류 발생\");\n            });\n        }\n    },\n    filters: {\n        toDate: function (regtime) {\n            return moment(new Date(regtime)).format(\"YYYY.MM.DD.HH:mm\");\n        }\n    },\n};\n</script>\n\n<style>\n.reply-header{\n    font-size: 15px;\n}\n\n.btn-reply{\n    margin: 10px;\n}\n</style>"]}]}