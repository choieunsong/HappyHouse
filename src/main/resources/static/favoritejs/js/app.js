(function(e){function t(t){for(var o,c,r=t[0],i=t[1],l=t[2],d=0,g=[];d<r.length;d++)c=r[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&g.push(s[c][0]),s[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);u&&u(t);while(g.length)g.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,r=1;r<a.length;r++){var i=a[r];0!==s[i]&&(o=!1)}o&&(n.splice(t--,1),e=c(c.s=a[0]))}return e}var o={},s={app:0},n=[];function c(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=o,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(a,o,function(t){return e[t]}.bind(null,o));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=i;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},3182:function(e,t,a){},"415e":function(e,t,a){"use strict";a("aa92")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=(a("d3b7"),a("bc3a")),n=a.n(s),c={},r=n.a.create(c);r.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),r.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Plugin.install=function(e,t){e.axios=r,window.axios=r,Object.defineProperties(e.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},o["a"].use(Plugin);Plugin;var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},l=[],u=new o["a"],d={components:{},name:"#app",computed:{getUserInfo:function(){return this.$store.state.userinfo}},created:function(){var e=this;n.a.get("http://localhost:9090/happyhouse/favorite/getUserInfo").then((function(t){var a=t.data;console.log(a),e.$store.dispatch("setUserInfo",a)})).catch((function(){console.log("로그인 정보 불러오기 실패");var t={userno:9,userid:"ssafy",email:"song@naver.com",username:"ssafy",address:"수원시 권선구",state:0};e.$store.dispatch("setUserInfo",t),console.log(e.getUserInfo)})),this.$router.push("/happyhouse/favorite"),setTimeout((function(){u.$emit("favoriteList")}),100)}},g=d,m=(a("034f"),a("2877")),h=Object(m["a"])(g,i,l,!1,null,null,null),f=h.exports,p=a("8c4f"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" Home ")])},_=[],k={name:"Home",data:function(){return{}},mounted:function(){},methods:{}},y=k,C=Object(m["a"])(y,v,_,!1,null,"fba837ec",null),b=C.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid",staticStyle:{"margin-top":"20px"}},[a("section",{staticClass:"head"},[a("div",{staticClass:"container"},[a("h1",[a("strong",{staticClass:"title"},[e._v(e._s(e.getUserInfo.username))]),e._v("님의 관심지역 목록")])])]),a("div",{staticClass:"row content"},[a("div",{staticClass:"list-group col-md-4"},[a("list",{attrs:{deals:e.deals}})],1),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"map_wrap"},[a("div",{staticStyle:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},attrs:{id:"map"}}),a("ul",{attrs:{id:"category"}},[a("li",{attrs:{id:"CS2","data-order":"1"},on:{click:function(t){return e.changeMarker("편의점")}}},[a("span",{staticClass:"category_bg store"}),e._v(" 편의점 ")]),a("li",{attrs:{id:"MT1","data-order":"2"},on:{click:function(t){return e.changeMarker("마트")}}},[a("span",{staticClass:"category_bg mart"}),e._v(" 마트 ")]),a("li",{attrs:{id:"SW8","data-order":"3"},on:{click:function(t){return e.changeMarker("지하철")}}},[a("span",{staticClass:"category_bg subway"}),e._v(" 지하철 ")]),a("li",{attrs:{id:"SC4","data-order":"4"},on:{click:function(t){return e.changeMarker("학교")}}},[a("span",{staticClass:"category_bg school"}),e._v(" 학교 ")]),a("li",{attrs:{id:"FD6","data-order":"5"},on:{click:function(t){return e.changeMarker("식당")}}},[a("span",{staticClass:"category_bg restaurant"}),e._v(" 식당 ")]),a("li",{attrs:{id:"CE7","data-order":"6"},on:{click:function(t){return e.changeMarker("카페")}}},[a("span",{staticClass:"category_bg cafe"}),e._v(" 카페 ")])])])]),a("detail"),e.flag?a("div",{staticClass:"container"},[a("div",{staticClass:"justify-content-center",staticStyle:{margin:"40px"}},[a("h3",{staticStyle:{"margin-bottom":"30px"}},[e._v("500m 반경 안의 상권 정보")]),a("div",{staticClass:"row"},[a("table",{staticClass:"table table-border"},[e._m(0),a("tbody",[a("td",[e._v(e._s(this.$store.state.dataCnt.convenient)+"개")]),a("td",[e._v(e._s(this.$store.state.dataCnt.mart)+"개")]),a("td",[e._v(e._s(this.$store.state.dataCnt.subway)+"개")]),a("td",[e._v(e._s(this.$store.state.dataCnt.school)+"개")]),a("td",[e._v(e._s(this.$store.state.dataCnt.restaurant)+"개")]),a("td",[e._v(e._s(this.$store.state.dataCnt.cafe)+"개")])])])])])]):e._e()],1)])])},N=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("th",{attrs:{scope:"col"}},[e._v("편의점")]),a("th",{attrs:{scope:"col"}},[e._v("마트")]),a("th",{attrs:{scope:"col"}},[e._v("지하철")]),a("th",{attrs:{scope:"col"}},[e._v("학교")]),a("th",{attrs:{scope:"col"}},[e._v("식당")]),a("th",{attrs:{scope:"col"}},[e._v("카페")])])}],I=(a("ac1f"),a("841c"),a("d81d"),a("b0c0"),a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-group listing-block shadow p-3 mb-1 bg-white rounded"},e._l(e.deals,(function(t,o){return a("a",{key:o,staticClass:"list-group-item shadow p-3 mb-1 bg-white rounded list-group-item-action",on:{click:function(a){return e.moveHandler(t)}}},[a("span",{staticClass:"icon-box"},[a("label",{staticClass:"custom-checkbox",attrs:{for:"id-of-input"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dealno,expression:"dealno"}],attrs:{type:"checkbox",id:"id-of-input"},domProps:{value:t.no,checked:Array.isArray(e.dealno)?e._i(e.dealno,t.no)>-1:e.dealno},on:{change:[function(a){var o=e.dealno,s=a.target,n=!!s.checked;if(Array.isArray(o)){var c=t.no,r=e._i(o,c);s.checked?r<0&&(e.dealno=o.concat([c])):r>-1&&(e.dealno=o.slice(0,r).concat(o.slice(r+1)))}else e.dealno=n},function(t){return e.remove(t)}]}}),a("i",{staticClass:"far fa-heart fa-2x heart-icon",attrs:{"data-toggle":"tooltip","data-placement":"top",title:"관심지역 제거"}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-5"},[a("img",{attrs:{src:e.imgsrc[parseInt(4*Math.random())].houseUrl,alt:"house image"}})]),a("div",{staticClass:"col-sm-7 text-left"},[a("h4",{staticClass:"title"},[e._v(e._s(t.aptName))]),a("h5",[e._v(e._s(t.city)+" "+e._s(t.gugun)+" "+e._s(t.dong)+" "+e._s(t.jibun)+"번지")]),a("h5",[e._v("거래가: "+e._s(t.dealAmount))]),a("h5",[e._v(e._s(t.floor)+"층")])])])])})),0)}),x=[],$={name:"List",props:["deals"],components:{},data:function(){return{imgsrc:[{houseUrl:"./img/house1.jpg"},{houseUrl:"./img/house2.jpg"},{houseUrl:"./img/house3.jpg"},{houseUrl:"./img/house4.jpg"}],dealno:[]}},computed:{getUsername:function(){return this.$store.state.username},getDealLength:function(){return this.$store.getters.getDealLength}},methods:{moveHandler:function(e){console.log("list -- moveHandler"),console.log(e),console.log("list get ready for query");var t={x:e.lng,y:e.lat,aptName:e.aptName,dong:e.dong};console.log(t),setTimeout((function(){u.$emit("setDetail",e),u.$emit("toggleIsClick"),u.$emit("search",t)}),100)},remove:function(e){console.log("remove event"),console.log(this.dealno);var t=this.dealno[0];n.a.delete("http://localhost:9090/happyhouse/favorite/".concat(t)).then((function(e){var t=e.data;"success"==t?(console.log("관심지역 삭제 완료"),setTimeout((function(){u.$emit("favoriteList")}),100)):alert("관심지역을 삭제하는 도중 문제가 발생했습니다.")})).catch((function(e){console.log(e),alert("관심지역을 삭제하는 도중 문제가 발생했습니다.")})),this.dealno=[];var a=this.getDealLength;console.log("dealLen: "+a),setTimeout((function(){a>0?u.$emit("toggleFlag",!0):u.$emit("toggleFlag",!1)}),100)}},created:function(){}},D=$,S=(a("f62b"),Object(m["a"])(D,I,x,!1,null,null,null)),L=S.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"container",staticStyle:{"margin-top":"30px"}},[a("table",{staticClass:"table table-borderless",attrs:{align:"center"}},[a("tr",{staticClass:"second"},[a("th",[e._v("아파트 이름:")]),e.flag?a("td",[e._v(e._s(e.dealInfo.aptName))]):e._e()]),a("tr",{staticClass:"second"},[a("th",[e._v("주소:")]),e.flag&&e.isClick?a("td",[e._v(e._s(e.getAddress))]):e._e()]),a("tr",{staticClass:"second"},[a("th",[e._v("거래금액:")]),e.flag?a("td",[e._v(e._s(e.dealInfo.dealAmount))]):e._e()]),a("tr",{staticClass:"second"},[a("th",[e._v("거래일:")]),e.flag&&e.isClick?a("td",[e._v(e._s(e.getDealDate))]):e._e()]),a("tr",{staticClass:"second"},[a("th",[e._v("평수:")]),e.flag&&e.isClick?a("td",[e._v(e._s(e.dealInfo.area)+"m²")]):e._e()])])])])},j=[],E={name:"Detail",components:{},data:function(){return{dealInfo:{},flag:!1,isClick:!1}},computed:{getAddress:function(){return"".concat(this.dealInfo.city," ").concat(this.dealInfo.gugun," ").concat(this.dealInfo.dong," ").concat(this.dealInfo.jibun,"지번")},getDealDate:function(){return"".concat(this.dealInfo.dealYear,"년 ").concat(this.dealInfo.dealMonth,"월 ").concat(this.dealInfo.dealDay,"일")},getDealLength:function(){return this.$store.getters.getDealLength}},created:function(){u.$on("setDetail",this.setDetail),u.$on("toggleFlag",this.toggleFlag),u.$on("toggleIsClick",this.toggleIsClick);var e=this.getDealLength;console.log("detail created dealLen: "+e),e>0?this.toggleFlag(!0):this.toggleFlag(!1)},methods:{setDetail:function(e){console.log("set Detail"),console.log(e),this.dealInfo=e,this.flag=!0},toggleFlag:function(e){this.flag=e},toggleIsClick:function(){this.isClick=!0}}},O=E,F=(a("6d33"),Object(m["a"])(O,M,j,!1,null,null,null)),P=F.exports,T={name:"Favorite",components:{List:L,Detail:P},data:function(){return{deals:[],imgsrc:"",map:"",flag:!1,type:[{name:"편의점",code:"CS2"},{name:"마트",code:"MT1"},{name:"지하철",code:"SW8"},{name:"학교",code:"SC4"},{name:"식당",code:"FD6"},{name:"카페",code:"CE7"}],markers:[],x:"",y:""}},computed:{getUserInfo:function(){return this.$store.state.userinfo},getImageSource:function(){return"@/assets/house/house"+parseInt(4*Math.random())+".jpg"},getDealLength:function(){return this.$store.getters.getDealLength}},created:function(){u.$on("favoriteList",this.favoriteList),u.$on("search",this.search)},mounted:function(){var e=this;if(window.kakao&&window.kakao.maps)console.log(window.kakao),this.initMap();else{var t=document.createElement("script");t.onload=function(){return kakao.maps.load(e.initMap)},t.src="http://dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=5d2d848495108af4b2b93c70751c2ac3&libraries=services",document.head.appendChild(t),console.log(t)}},methods:{favoriteList:function(){var e=this,t=this.getUserInfo;console.log(t),console.log(t.userno),n.a.get("http://localhost:9090/happyhouse/favorite/".concat(t.userno)).then((function(t){var a=t.data;console.log("favorite list"),console.log(a),e.deals=a,console.log(e.deals),e.$store.dispatch("setDealsInfo",a);var o=e.getDealLength;console.log(">>>>>>>>>>>>>>>>>>>>>>len: "+o),setTimeout((function(){o>0?u.$emit("toggleFlag",!0):u.$emit("toggleFlag",!1)}),100)})).catch((function(e){console.log(e),alert("관심지역 목록 조회 중 오류 발생")}))},initMap:function(){var e=document.getElementById("map"),t={center:new kakao.maps.LatLng(33.450701,126.570667),level:4};this.map=new kakao.maps.Map(e,t)},setCenter:function(e,t){var a=new kakao.maps.LatLng(e,t);this.map.setCenter(a)},search:function(e){console.log("favorite -- send query to kakao api"),this.flag=!0,console.log(e),this.x=e.x,this.y=e.y;var t=new kakao.maps.LatLng(e.y,e.x),a=new kakao.maps.Marker({map:this.map,position:t});a.setMap(this.map),this.setCenter(e.y,e.x);var o=new kakao.maps.Circle({center:t,radius:500,strokeWeight:4,strokeColor:"#75B8FA",strokeOpacity:1,strokeStyle:"dashed",fillColor:"#CFE7FF",fillOpacity:.5});o.setMap(this.map);for(var s=0;s<this.type.length;s++)this.getSearchLen(s,e)},getSearchLen:function(e,t){var a=this;console.log("~~~~~~~get searchlen "),console.log("idx: "+e+", query: "+t);var o=500,s=this.type[e].name,c=this.type[e].code;console.log("name: "+s+", code: "+c),n()({url:"https://dapi.kakao.com/v2/local/search/keyword.json?query=".concat(s,"&x=").concat(t.x,"&y=").concat(t.y,"&radius=").concat(o,"&category_group_code=").concat(c),method:"get",headers:{Authorization:"KakaoAK 04a0a8afa1148ce20fa12e3de906560b"}}).then((function(t){var o=t.data;console.log("카카오 찾기 결과 성공 "+e),console.log(o);var s=o.documents.length;console.log(s);var n={idx:e,cnt:s};console.log(n),a.$store.dispatch("setDataCnt",n)})).catch((function(e){console.log("카카오 찾기 결과 실패"),console.log(e)}))},changeMarker:function(e){console.log("change marker"),console.log(e),this.setMarker(null);var t=document.getElementById("CS2"),a=document.getElementById("MT1"),o=document.getElementById("SW8"),s=document.getElementById("SC4"),n=document.getElementById("FD6"),c=document.getElementById("CE7");"편의점"==e?(t.className="menu_selected",a.className="",o.className="",s.className="",n.className="",c.className="",this.getPositions(e,t.id)):"마트"==e?(t.className="",a.className="menu_selected",o.className="",s.className="",n.className="",c.className="",this.getPositions(e,a.id)):"지하철"==e?(t.className="",a.className="",o.className="menu_selected",s.className="",n.className="",c.className="",this.getPositions(e,o.id)):"학교"==e?(t.className="",a.className="",o.className="",s.className="menu_selected",n.className="",c.className="",this.getPositions(e,s.id)):"식당"==e?(t.className="",a.className="",o.className="",s.className="",n.className="menu_selected",c.className="",this.getPositions(e,n.id)):"카페"==e&&(t.className="",a.className="",o.className="",s.className="",n.className="",c.className="menu_selected",this.getPositions(e,c.id))},setMarker:function(e){for(var t=0;t<this.markers.length;t++)this.markers[t].setMap(e)},getPositions:function(e,t){var a=this;console.log(">>>>>>>>>>>>>. get positions "),console.log("type: "+e+", code: "+t);var o=500;this.markers=[],n()({url:"https://dapi.kakao.com/v2/local/search/keyword.json?query=".concat(e,"&x=").concat(this.x,"&y=").concat(this.y,"&radius=").concat(o,"&category_group_code=").concat(t),method:"get",headers:{Authorization:"KakaoAK 04a0a8afa1148ce20fa12e3de906560b"}}).then((function(e){var t=e.data;console.log("카카오로 좌표 찾기 결과 성공 "),console.log(t);for(var o="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png",s=0;s<t.documents.length;s++){var n=t.documents[s],c=new kakao.maps.Size(30,30),r=new kakao.maps.MarkerImage(o,c),i=new kakao.maps.Marker({position:new kakao.maps.LatLng(t.documents[s].y,t.documents[s].x),image:r});a.markers.push(i),console.log("info"),console.log(n);var l=new kakao.maps.InfoWindow({content:'<div style="width:50px; height:30px;>근린공원</div>'});kakao.maps.event.addListener(i,"mouseover",(function(){console.log("info window open"),console.log(i),console.log(l.content),l.open(this.map,i)})),kakao.maps.event.addListener(i,"mouseout",(function(){console.log("info window close"),l.close()}))}console.log("markers"),console.log(a.markers),a.setMarker(a.map)})).catch((function(e){console.log("카카오 찾기 결과 실패"),console.log(e)}))}}},A=T,U=(a("415e"),Object(m["a"])(A,w,N,!1,null,null,null)),B=U.exports;o["a"].use(p["a"]);var q=[{path:"/happyhouse",name:"Home",component:b},{path:"/happyhouse/favorite",name:"Favorite",component:B},{path:"/happyhouse/favorite/list",name:"List",component:L},{path:"/happyhouse/favorite/detail",name:"Detail",component:P}],H=new p["a"]({mode:"history",base:"/",routes:q}),W=H,K=a("2f62");o["a"].use(K["a"]);var z=new K["a"].Store({state:{userinfo:{userno:0,userid:"",username:"",address:"",email:"",state:0},deals:[],dataCnt:{convenient:0,mart:0,subway:0,school:0,restaurant:0,cafe:0}},getters:{getUserInfo:function(e){return e.userinfo},getDeals:function(e){return e.deals},getDealLength:function(e){return e.deals.length},getDataCnt:function(e){return e.dataCnt}},mutations:{SET_USER_INFO:function(e,t){console.log("mutation: "),console.log(t),e.userinfo.userno=t.userno,e.userinfo.userid=t.userid,e.userinfo.username=t.username,e.userinfo.address=t.address,e.userinfo.email=t.email,e.userinfo.state=t.state,console.log("mutation set user info: "),console.log(e.userinfo)},SET_DEALS_INFO:function(e,t){console.log(t),e.deals=t},SET_DATA_CNT:function(e,t){switch(console.log("mutation"),console.log(t),t.idx){case 0:e.dataCnt.convenient=t.cnt,console.log("case 1:"+t.cnt);break;case 1:e.dataCnt.mart=t.cnt,console.log("case 2:"+t.cnt);break;case 2:e.dataCnt.subway=t.cnt,console.log("case 3:"+t.cnt);break;case 3:e.dataCnt.school=t.cnt,console.log("case 4:"+t.cnt);break;case 4:e.dataCnt.restaurant=t.cnt,console.log("case 5:"+t.cnt);break;case 5:e.dataCnt.cafe=t.cnt,console.log("case 6:"+t.cnt);break}}},actions:{setUserInfo:function(e,t){var a=e.commit;console.log(t),a("SET_USER_INFO",t)},setDealsInfo:function(e,t){var a=e.commit;console.log(t),a("SET_DEALS_INFqO",t)},setDataCnt:function(e,t){var a=e.commit;console.log("idx: "+t.idx+", cnt: "+t.cnt),a("SET_DATA_CNT",t)}}});o["a"].config.productionTip=!1,new o["a"]({router:W,store:z,render:function(e){return e(f)}}).$mount("#app")},"65da":function(e,t,a){},"6d33":function(e,t,a){"use strict";a("3182")},"85ec":function(e,t,a){},aa92:function(e,t,a){},f62b:function(e,t,a){"use strict";a("65da")}});
//# sourceMappingURL=app.js.map